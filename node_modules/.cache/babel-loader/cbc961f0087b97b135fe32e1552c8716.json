{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import _slicedToArray from\"/Users/kassim.assani/playground/extra-custom-demo2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useEffect,useState,useContext}from'react';// Import Customs\nimport{VirtualSearchBox,CustomProductResultsHits,CustomRangeSlider,CustomSearchBox}from'./Hits';import FederatedSearch from'./FederatedSearch';import LandingPage from'../Homepage/LandingPage';import{Context as DemoSettingsContext}from'../../context/appActions';// Import third party packages\nimport algoliasearch from'algoliasearch/lite';import{InstantSearch,Hits,Index,Configure,HitsPerPage,Pagination,HierarchicalMenu,VoiceSearch,RefinementList,connectQueryRules,ClearRefinements,connectHierarchicalMenu}from'react-instantsearch-dom';var searchClient=algoliasearch('JDBD6EJM33','0fe54b2e3991d370c91376981aff9d48');// Add Banner\nvar QueryRuleCustomData=function QueryRuleCustomData(_ref){var items=_ref.items;return items.map(function(_ref2){var image=_ref2.image;if(!image){return null;}return/*#__PURE__*/_jsx(\"div\",{className:\"banner-img\",children:/*#__PURE__*/_jsx(\"img\",{src:image,alt:\"test\"})});});};var CustomQueryRuleCustomData=connectQueryRules(QueryRuleCustomData);// Add Banner\nvar QueryRuleRedirect=function QueryRuleRedirect(_ref3){var items=_ref3.items;return items.map(function(_ref4){var redirect=_ref4.redirect;if(!redirect){return null;}window.location.href=redirect;});};var CustomQueryRuleRedirect=connectQueryRules(QueryRuleRedirect);var Searchpage=function Searchpage(_ref5){var userToken=_ref5.userToken,showCat=_ref5.showCat,isSearchVisible=_ref5.isSearchVisible,setIsSearchVisible=_ref5.setIsSearchVisible,isSearching=_ref5.isSearching,setIsSearching=_ref5.setIsSearching;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),query=_useState2[0],setQuery=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),showEmptySearch=_useState4[0],setShowEmptySearch=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isSearchbarClicked=_useState6[0],setIsSearchbarClicked=_useState6[1];var _useState7=useState('no'),_useState8=_slicedToArray(_useState7,2),enterPressed=_useState8[0],setIsEnterPressed=_useState8[1];var _useContext=useContext(DemoSettingsContext),state=_useContext.state;useEffect(function(){console.log('state :',state);if(state.storeQuery&&state.storeQuery!==''){setIsSearchVisible(true);setIsSearching(true);setQuery(state.storeQuery);setIsEnterPressed('no');}if(state.storeResultsQuery&&state.storeResultsQuery!==''){setIsSearchVisible(true);setIsSearching(true);setQuery(state.storeResultsQuery);setIsEnterPressed('yes');}},[state.storeQuery,state.storeResultsQuery]);return/*#__PURE__*/_jsx(\"div\",{children:isSearchVisible?/*#__PURE__*/_jsxs(InstantSearch,{indexName:\"eXtra\",searchClient:searchClient,children:[/*#__PURE__*/_jsx(Configure,{enablePersonalization:\"true\",userToken:userToken}),/*#__PURE__*/_jsx(\"div\",{className:\"search-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"search-bar\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-search\"}),/*#__PURE__*/_jsx(CustomSearchBox,{id:\"search-input\",setIsSearchbarClicked:setIsSearchbarClicked,query:query,setIsEnterPressed:setIsEnterPressed,setIsSearching:setIsSearching,setQuery:setQuery,setShowEmptySearch:setShowEmptySearch}),/*#__PURE__*/_jsx(VoiceSearch,{})]})}),isSearching&&query!==''&&enterPressed==='no'?/*#__PURE__*/_jsx(FederatedSearch,{CustomQueryRuleRedirect:CustomQueryRuleRedirect,CustomQueryRuleCustomData:CustomQueryRuleCustomData,Index:Index,HitsPerPage:HitsPerPage}):enterPressed==='yes'?/*#__PURE__*/_jsxs(\"div\",{className:\"search-results\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"left-facets\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header-item\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"SEARCH\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"header-item\",children:/*#__PURE__*/_jsx(ClearRefinements,{})})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"filter-header\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Category\"})}),/*#__PURE__*/_jsx(HierarchicalMenu,{attributes:['categorylvl1','categorylvl2','categorylvl3'],translations:{showMore:function showMore(expanded){return expanded?'Show less':'Show more';}}}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"filter-header\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Brand\"})}),/*#__PURE__*/_jsx(RefinementList,{attribute:\"brandName\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"filter-header\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Home Delivery\"})}),/*#__PURE__*/_jsx(RefinementList,{attribute:\"homeDelivery\",limit:5}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"filter-header\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Price\"})}),/*#__PURE__*/_jsx(CustomRangeSlider,{attribute:\"price\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"right-results\",children:[/*#__PURE__*/_jsxs(Index,{indexName:\"eXtra\",indexId:\"products\",children:[/*#__PURE__*/_jsx(HitsPerPage,{defaultRefinement:18,items:[]}),/*#__PURE__*/_jsx(CustomProductResultsHits,{})]}),/*#__PURE__*/_jsx(Pagination,{id:\"pagination\"})]})]}):/*#__PURE__*/_jsx(LandingPage,{}),/*#__PURE__*/_jsx(VirtualSearchBox,{defaultRefinement:query})]}):!showCat?/*#__PURE__*/_jsx(LandingPage,{}):null});};export default Searchpage;","map":{"version":3,"sources":["/Users/kassim.assani/playground/extra-custom-demo2/src/components/Searchpage/SearchPage.jsx"],"names":["React","useEffect","useState","useContext","VirtualSearchBox","CustomProductResultsHits","CustomRangeSlider","CustomSearchBox","FederatedSearch","LandingPage","Context","DemoSettingsContext","algoliasearch","InstantSearch","Hits","Index","Configure","HitsPerPage","Pagination","HierarchicalMenu","VoiceSearch","RefinementList","connectQueryRules","ClearRefinements","connectHierarchicalMenu","searchClient","QueryRuleCustomData","items","map","image","CustomQueryRuleCustomData","QueryRuleRedirect","redirect","window","location","href","CustomQueryRuleRedirect","Searchpage","userToken","showCat","isSearchVisible","setIsSearchVisible","isSearching","setIsSearching","query","setQuery","showEmptySearch","setShowEmptySearch","isSearchbarClicked","setIsSearchbarClicked","enterPressed","setIsEnterPressed","state","console","log","storeQuery","storeResultsQuery","showMore","expanded"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\n\n// Import Customs\nimport {\n  VirtualSearchBox,\n  CustomProductResultsHits,\n  CustomRangeSlider,\n  CustomSearchBox,\n} from './Hits';\n\nimport FederatedSearch from './FederatedSearch';\nimport LandingPage from '../Homepage/LandingPage';\n\nimport { Context as DemoSettingsContext } from '../../context/appActions';\n\n// Import third party packages\nimport algoliasearch from 'algoliasearch/lite';\nimport {\n  InstantSearch,\n  Hits,\n  Index,\n  Configure,\n  HitsPerPage,\n  Pagination,\n  HierarchicalMenu,\n  VoiceSearch,\n  RefinementList,\n  connectQueryRules,\n  ClearRefinements,\n  connectHierarchicalMenu,\n} from 'react-instantsearch-dom';\n\nconst searchClient = algoliasearch(\n  'JDBD6EJM33',\n  '0fe54b2e3991d370c91376981aff9d48',\n);\n\n// Add Banner\nconst QueryRuleCustomData = ({ items }) =>\n  items.map(({ image }) => {\n    if (!image) {\n      return null;\n    }\n\n    return (\n      <div className='banner-img'>\n        <img src={image} alt='test' />\n      </div>\n    );\n  });\n\nconst CustomQueryRuleCustomData = connectQueryRules(QueryRuleCustomData);\n\n// Add Banner\n\nconst QueryRuleRedirect = ({ items }) =>\n  items.map(({ redirect }) => {\n    if (!redirect) {\n      return null;\n    }\n\n    window.location.href = redirect;\n  });\n\nconst CustomQueryRuleRedirect = connectQueryRules(QueryRuleRedirect);\n\nconst Searchpage = ({\n  userToken,\n  showCat,\n  isSearchVisible,\n  setIsSearchVisible,\n  isSearching,\n  setIsSearching,\n}) => {\n  const [query, setQuery] = useState('');\n  const [showEmptySearch, setShowEmptySearch] = useState(true);\n  const [isSearchbarClicked, setIsSearchbarClicked] = useState(false);\n  const [enterPressed, setIsEnterPressed] = useState('no');\n  const { state } = useContext(DemoSettingsContext);\n\n  useEffect(() => {\n    console.log('state :', state);\n    if (state.storeQuery && state.storeQuery !== '') {\n      setIsSearchVisible(true);\n      setIsSearching(true);\n      setQuery(state.storeQuery);\n      setIsEnterPressed('no');\n    }\n\n    if (state.storeResultsQuery && state.storeResultsQuery !== '') {\n      setIsSearchVisible(true);\n      setIsSearching(true);\n      setQuery(state.storeResultsQuery);\n      setIsEnterPressed('yes');\n    }\n  }, [state.storeQuery, state.storeResultsQuery]);\n\n  return (\n    <div>\n      {isSearchVisible ? (\n        <InstantSearch\n          indexName='eXtra'\n          searchClient={searchClient}\n        >\n          <Configure enablePersonalization='true' userToken={userToken} />\n\n          <div className='search-container'>\n            <div className='search-bar'>\n              <i className='fa fa-search'></i>\n              <CustomSearchBox\n                id='search-input'\n                setIsSearchbarClicked={setIsSearchbarClicked}\n                query={query}\n                setIsEnterPressed={setIsEnterPressed}\n                setIsSearching={setIsSearching}\n                setQuery={setQuery}\n                setShowEmptySearch={setShowEmptySearch}\n              />\n              <VoiceSearch />\n            </div>\n          </div>\n\n          {isSearching && query !== '' && enterPressed === 'no' ? (\n            <FederatedSearch\n              CustomQueryRuleRedirect={CustomQueryRuleRedirect}\n              CustomQueryRuleCustomData={CustomQueryRuleCustomData}\n              Index={Index}\n              HitsPerPage={HitsPerPage}\n            />\n          ) : enterPressed === 'yes' ? (\n            <div className='search-results'>\n              <div className='left-facets'>\n                <div className='search-header'>\n                  <div className='header-item'>\n                    <h2>SEARCH</h2>\n                  </div>\n                  <div className='header-item'>\n                    <ClearRefinements />\n                  </div>\n                </div>\n                <hr />\n\n                <div className='filter-container'>\n                  <div className='filter-header'>\n                    <span>Category</span>\n                  </div>\n\n                  <HierarchicalMenu\n                    attributes={[\n                      'categorylvl1',\n                      'categorylvl2',\n                      'categorylvl3',\n                    ]}\n                    translations={{\n                      showMore(expanded) {\n                        return expanded ? 'Show less' : 'Show more';\n                      },\n                    }}\n                  />\n\n                  <hr />\n\n                  <div className='filter-header'>\n                    <span>Brand</span>\n                  </div>\n                  <RefinementList attribute='brandName' />\n\n                  <hr />\n                 \n                  <div className='filter-header'>\n                    <span>Home Delivery</span>\n                  </div>\n                  <RefinementList attribute='homeDelivery' limit={5} />\n\n                  <hr />\n                  <div className='filter-header'>\n                    <span>Price</span>\n                  </div>\n                  {/* <RefinementList attribute=\"price\" /> */}\n                  <CustomRangeSlider attribute='price' />\n                </div>\n              </div>\n              <div className='right-results'>\n                <Index indexName='eXtra' indexId='products'>\n                  <HitsPerPage defaultRefinement={18} items={[]} />\n                  <CustomProductResultsHits />\n                </Index>\n                <Pagination id='pagination' />\n              </div>\n            </div>\n          ) : (\n            <LandingPage />\n          )}\n\n          <VirtualSearchBox defaultRefinement={query} />\n        </InstantSearch>\n      ) : !showCat ? (\n        <LandingPage />\n      ) : null}\n    </div>\n  );\n};\n\nexport default Searchpage;\n"]},"metadata":{},"sourceType":"module"}